function getReadable(a){return padAZero(a.getHours())+":"+padAZero(a.getMinutes())}function padAZero(a){a=a.toString();if(a.length==1){return"0"+a}else{return a}}var timeParsePatterns=[{re:/^now/i,example:new Array("now"),handler:function(){return new Date()}},{re:/(\d{1,2}):(\d{1,2}):(\d{1,2})(?:p| p)/,example:new Array("9:55:00 pm","12:55:00 p.m.","9:55:00 p","11:5:10pm","9:5:1p"),handler:function(b){var c=new Date();var a=parseInt(b[1],10);if(a<12){a+=12}c.setHours(a);c.setMinutes(parseInt(b[2],10));c.setSeconds(parseInt(b[3],10));return c}},{re:/(\d{1,2}):(\d{1,2})(?:p| p)/,example:new Array("9:55 pm","12:55 p.m.","9:55 p","11:5pm","9:5p"),handler:function(b){var c=new Date();var a=parseInt(b[1],10);if(a<12){a+=12}c.setHours(a);c.setMinutes(parseInt(b[2],10));c.setSeconds(0);return c}},{re:/(\d{1,2})(?:p| p)/,example:new Array("9 pm","12 p.m.","9 p","11pm","9p"),handler:function(b){var c=new Date();var a=parseInt(b[1],10);if(a<12){a+=12}c.setHours(a);c.setMinutes(0);c.setSeconds(0);return c}},{re:/(\d{1,2}):(\d{1,2}):(\d{1,2})/,example:new Array("9:55:00","19:55:00","19:5:10","9:5:1","9:55:00 a.m.","11:55:00a"),handler:function(a){var b=new Date();b.setHours(parseInt(a[1],10));b.setMinutes(parseInt(a[2],10));b.setSeconds(parseInt(a[3],10));return b}},{re:/(\d{1,2}):(\d{1,2})/,example:new Array("9:55","19:55","19:5","9:55 a.m.","11:55a"),handler:function(a){var b=new Date();b.setHours(parseInt(a[1],10));b.setMinutes(parseInt(a[2],10));b.setSeconds(0);return b}},{re:/(\d{1,6})/,example:new Array("9","9a","9am","19","1950","195510","0955"),handler:function(e){var f=new Date();var c=e[1].substring(0,2);var a=parseInt(e[1].substring(2,4),10);var b=parseInt(e[1].substring(4,6),10);if(isNaN(a)){a=0}if(isNaN(b)){b=0}f.setHours(parseInt(c,10));f.setMinutes(parseInt(a,10));f.setSeconds(parseInt(b,10));return f}},];function getExamples(c){var g=document.createElement("ul");g.setAttribute("id","time-parser-examples");for(var f=0;f<timeParsePatterns.length;f++){try{var b=timeParsePatterns[f].example;for(var d=0;d<b.length;d++){var h=document.createElement("li");if(!c){var a=document.createTextNode(b[d])}else{var l=parseTimeString(b[d]);var m=getReadable(l)+" -> "+l.toTimeString();var a=document.createTextNode(b[d]+" -> "+m)}h.appendChild(a);g.appendChild(h)}}catch(k){}}return g}function parseTimeString(d){for(var a=0;a<timeParsePatterns.length;a++){var c=timeParsePatterns[a].re;var b=timeParsePatterns[a].handler;var e=c.exec(d);if(e){return b(e)}}throw new Error("Invalid time string")}function magicTime(a){var c=a.id+"-messages";try{var g=parseTimeString(a.value);a.value=getReadable(g);a.className="";try{el=document.getElementById(c);el.firstChild.nodeValue=g.toTimeString();el.className="normal"}catch(f){}}catch(f){a.className="error";try{el=document.getElementById(c);var b=f.message;if(b.indexOf("is null or not an object")>-1){b="Invalid time string"}el.firstChild.nodeValue=b;el.className="error"}catch(f){}}};